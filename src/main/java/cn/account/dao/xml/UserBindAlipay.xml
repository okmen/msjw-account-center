<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.account.dao.mapper.UserBindAlipayMapper">
	
	<update id="addOrUpdateLoginInfo" parameterType="cn.account.bean.UserBind">
		insert into t_user_bind_alipay (
			user_id,id_card,mobile_number,bind_date,unbind_date,is_bind,client_type
		)
		values(
			#{userId}, #{idCard}, #{mobileNumber}, #{bindDate}, #{unbindDate},#{isBind}, #{clientType} 
		)
		ON DUPLICATE KEY UPDATE id_card = #{idCard},mobile_number = #{mobileNumber},bind_date = #{bindDate}, is_bind = #{isBind}
	</update>
	
	<!-- 取消绑定支付宝 -->
	<update id="unbindVehicle" parameterType="cn.account.bean.UserBind" >
		UPDATE t_user_bind_alipay SET `is_bind`=1,unbind_date=sysdate() where id_card =#{idCard} and user_id =#{userId}
	</update>
	
</mapper>
